{{## def.attrs:p:{{ var keys = p.decl.attrs ? Object.keys( p.decl.attrs ) : null; }}{{? keys }}
    static Attr {{= p.name }}[ {{= keys.length }} ];
{{~ keys : key:ki }}
    {{= p.name }}[ {{= ki }} ].Key     = "{{= key }}";
    {{= p.name }}[ {{= ki }} ].Value   = "{{= p.decl.attrs[ key ] }}";
{{~}}
    {{? p.prefix }}{{= p.prefix }}.{{?}}Attrs       = {{= p.name }};
    {{? p.prefix }}{{= p.prefix }}.{{?}}NumAttrs    = {{= keys.length }};
{{?}}#}}{{## def.enum:{{? decl.constants && decl.constants.length }}
    static Constant e[ {{= decl.constants.length }} ];
{{~ decl.constants : e:ei }}
    e[ {{= ei }} ].Name     = "{{= e.name }}";
    e[ {{= ei }} ].Value    = {{= e.value }};
    {{# def.attrs:{ decl:e, name:"e" + ei + "_attrs", prefix:"e[" + ei + "]" } }}
{{~}}{{?}}
    // set constants

    Constants       = e;
    NumMembers      = {{= decl.constants.length }};#}}{{## def.inherits:
    static const TypeInfo* bases[] = { this{{~ decl.inherits : base }}, Type<{{= base.type }}>(){{~}}, nullptr };
    Inherits = bases;
#}}{{## def.fields:{{? decl.fields && decl.fields.length }}
    //
    // class fields
    //

    static Field p[ {{= decl.fields.length }} ];
{{~ decl.fields : f:fi }}
    // {{= fi}}. {{= f.name }}{{? f.from }} (inhertied from {{= f.from }}){{?}}

    p[ {{=fi}} ].Name     = "{{= f.name }}";
    p[ {{=fi}} ].Info     = Type< {{= f.type }} >();
    p[ {{=fi}} ].Get      = []( void* o ) -> void* { return &reinterpret_cast<{{= decl.name }}*>(o)->{{= f.name }}; };
    {{# def.attrs:{ decl:f, name:"p" + fi + "_attrs", prefix:"p[" + fi + "]" } }}
{{~}}
    // set fields

    Fields          = p;
    NumMembers      = {{= decl.fields.length }};{{?}}#}}