//////////////////////////////////////////////////////////////////////////

#define DECLARE_RTTI virtual Type::Info* Type();

struct Vector
{
    float x;
    float y;
    float z;
};

struct Colour
{
    float r;
    float g;
    float b;
    float a;
};


//////////////////////////////////////////////////////////////////////////

// %reflect
struct Shape
{
    char*   name;
    Colour  colour;

    // factory
    static Shape*   Create( const char* name );
    void Set( Shape*, const char* name, const char* value );
};

struct Sphere : public Shape
{
    Vector  pos;
    float   radius;

    <%auto
    DECLARE_RTTI

    Vector&    GetPos();
    void       SetPos( Vector& );
    float&     GetRadius();
    void       SetRadius( float& );
    %>
};

struct Plane : public Shape
{
    Vector  normal;
    float   d;

    <%auto
    DECLARE_RTTI

    Vector&    GetNormal();
    void       SetNormal( Vector& );
    float&     GetD();
    void       SetD( float& );
    // %>
};

struct Line : public Shape
{
    Vector pos;
    Vector dir;

    <%auto
    DECLARE_RTTI

    Vector&    GetPos();
    void       SetPos( Vector& );
    Vector&    GetDir();
    void       SetDir( Vector& );
    %>
};

struct Box : public Shape
{
    Vector max;
    Vector min;

    <%auto
    DECLARE_RTTI

    Vector&    GetMax();
    void       SetMax( Vector& );
    Vector&    GetMin();
    void       SetMin( Vector& );
    // %>
};

